<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_logger - Structured Logging for Eiffel</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="images/logo.png">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="images/logo.png" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_logger</h1>
        <p class="tagline">Structured Logging with JSON Output for Eiffel</p>
        <div class="badges">
            <span class="badge badge-rfc">Foundation Layer</span>
            <span class="badge badge-version">v1.0.0</span>
            <span class="badge badge-license">MIT</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#quick-start">Quick Start</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#api">API Reference</a></li>
            <li><a href="https://github.com/simple-eiffel/simple_logger">GitHub</a></li>
        </ul>
    </nav>

    <main>
        <section id="overview">
            <h2>Overview</h2>
            <p>
                <strong>simple_logger</strong> provides an enhanced logging facade for Eiffel with 
                structured fields, JSON output format, child loggers with inherited context, and 
                built-in timing/tracing support. It wraps EiffelStudio's logging facilities with 
                a clean, modern API.
            </p>
        </section>

        <section id="quick-start">
            <h2>Quick Start</h2>
            <h3>Installation</h3>
            <pre><code>&lt;library name="simple_logger" location="$SIMPLE_LOGGER\simple_logger.ecf"/&gt;</code></pre>
            
            <h3>Basic Usage</h3>
            <pre><code>local
    log: SIMPLE_LOGGER
do
    create log.make
    
    -- Basic logging
    log.info ("Application started")
    log.warn ("Low disk space")
    log.error ("Connection failed")
    
    -- With structured fields
    log.with_field ("user", "alice")
    log.with_field ("action", "login")
    log.info ("User logged in")
end</code></pre>
        </section>

        <section id="features">
            <h2>Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Structured Logging</h4>
                    <p>Key-value fields attached to log entries</p>
                </div>
                <div class="feature-card">
                    <h4>JSON Output</h4>
                    <p>Machine-parseable format for log aggregation</p>
                </div>
                <div class="feature-card">
                    <h4>Child Loggers</h4>
                    <p>Inherit context fields from parent loggers</p>
                </div>
                <div class="feature-card">
                    <h4>Timing Support</h4>
                    <p>Built-in timer for operation duration logging</p>
                </div>
            </div>

            <h3>JSON Output</h3>
            <pre><code>log.set_json_output (True)
log.info ("Server started")

-- Output:
-- {"timestamp":"2025-12-06T14:30:00Z","level":"info","message":"Server started"}</code></pre>

            <h3>Child Loggers</h3>
            <pre><code>-- Create child with inherited context
child := log.child_with_field ("module", "auth")
child.info ("Processing request")
-- Includes: module=auth plus any parent fields</code></pre>

            <h3>Duration Logging</h3>
            <pre><code>log.start_timer
-- ... expensive operation ...
log.log_duration ("Operation completed")</code></pre>
        </section>

        <section id="api">
            <h2>API Reference</h2>
            
            <h3>Log Levels</h3>
            <table>
                <tr><th>Level</th><th>Feature</th><th>Use Case</th></tr>
                <tr><td>DEBUG</td><td><code>debug_msg</code></td><td>Verbose debugging info</td></tr>
                <tr><td>INFO</td><td><code>info</code></td><td>Normal operational messages</td></tr>
                <tr><td>WARN</td><td><code>warn</code></td><td>Warning conditions</td></tr>
                <tr><td>ERROR</td><td><code>error</code></td><td>Error conditions</td></tr>
                <tr><td>FATAL</td><td><code>fatal</code></td><td>System failure</td></tr>
            </table>

            <div class="api-section">
                <h3>make</h3>
                <div class="signature">create log.make</div>
                <p>Create logger with default INFO level and console output.</p>
                <div class="contracts">
                    <h4>Ensure</h4>
                    <div class="ensure">level_is_info: level = Level_info</div>
                    <div class="ensure">outputs_to_console: is_console_output</div>
                </div>
            </div>

            <div class="api-section">
                <h3>with_field (a_key, a_value: STRING)</h3>
                <div class="signature">log.with_field ("user", "alice")</div>
                <p>Add field to next log entry. Returns self for chaining.</p>
            </div>

            <div class="api-section">
                <h3>child_with_field (a_key, a_value: STRING): SIMPLE_LOGGER</h3>
                <div class="signature">child := log.child_with_field ("module", "auth")</div>
                <p>Create child logger with inherited context plus new field.</p>
            </div>

            <h3>Configuration</h3>
            <table>
                <tr><th>Feature</th><th>Description</th></tr>
                <tr><td><code>set_level (level)</code></td><td>Set minimum log level</td></tr>
                <tr><td><code>set_json_output (bool)</code></td><td>Enable/disable JSON format</td></tr>
                <tr><td><code>set_file_output (path)</code></td><td>Log to file</td></tr>
            </table>

            <h3>Timing</h3>
            <table>
                <tr><th>Feature</th><th>Description</th></tr>
                <tr><td><code>start_timer</code></td><td>Start timing</td></tr>
                <tr><td><code>log_duration (msg)</code></td><td>Log elapsed time</td></tr>
                <tr><td><code>enter (feature_name)</code></td><td>Log entry with indent</td></tr>
                <tr><td><code>exit (feature_name)</code></td><td>Log exit with dedent</td></tr>
            </table>
        </section>
    </main>

    <footer>
        <p>Part of the <a href="https://github.com/simple-eiffel">simple_*</a> library collection</p>
        <p>Depends on: <a href="https://simple-eiffel.github.io/simple_json/">simple_json</a></p>
        <p class="copyright">MIT License - Copyright (c) 2024-2025, Larry Rix</p>
    </footer>
</body>
</html>
